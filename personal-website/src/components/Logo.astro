---
const { coverSquare } = Astro.props;
---

<logo-element>
  <div id="logo" class="logo-container">
    <a href="/">
      <svg width="200" height="200" viewBox="0 0 200 200">
        <rect
          x="50"
          y="50"
          width="100"
          height="100"
          stroke="#454545"
          stroke-width="5"
          fill="none"
          rx="1"
          ry="1"
          transform="rotate(45 100 100)"></rect>

        <!-- Referenced Stack Overflow to pass classes to child components.
         https://stackoverflow.com/questions/75933212/can-i-pass-additional-classes-to-an-astro-component-from-parent
         -->
        <rect
          id="cover-square"
          class:list={[coverSquare || "coverSquare-white"]}
          width="45"
          height="45"
          rx="10"
          ry="10"
          transform="rotate(45 100 100) translate(53, 137.5)"
          visibility="visible"></rect>

        <line
          id="line1"
          x1="100"
          y1="50"
          x2="100"
          y2="150"
          transform="rotate(45 100 100)"
          stroke="#454545"
          stroke-width="5"
          stroke-linecap="round"></line>

        <line
          id="line2"
          x1="50"
          y1="100"
          x2="150"
          y2="100"
          transform="rotate(45 100 100)"
          stroke="#454545"
          stroke-width="5"
          stroke-linecap="round"></line>
      </svg>
    </a>
  </div>
</logo-element>

<script>
  class Logo extends HTMLElement {
    connectedCallback() {
      const logo = this.querySelector("#logo");
      const coverSquare = this.querySelector("#cover-square");

      logo.addEventListener("mouseenter", () => {
        coverSquare.setAttribute(
          "transform",
          "rotate(45 100 100) translate(35, 35)"
        );
        coverSquare.setAttribute("visibility", "visible");
      });

      // Referenced ChatGPT to calculation the math of adjusted mouse positino due to logo ratation 
      logo.addEventListener("mousemove", (event) => {
        const mouseEvent = event as MouseEvent;
        const rect = logo.getBoundingClientRect();
        const mouseX = mouseEvent.clientX - rect.left;
        const mouseY = mouseEvent.clientY - rect.top;

        const adjustedMouseX = mouseX - 20;
        const adjustedMouseY = mouseY - 10;

        const rotatedX =
          adjustedMouseX * Math.cos(Math.PI / 4) +
          adjustedMouseY * Math.sin(Math.PI / 4);
        const rotatedY =
          -adjustedMouseX * Math.sin(Math.PI / 4) +
          adjustedMouseY * Math.cos(Math.PI / 4);

        coverSquare.setAttribute("width", "50");
        coverSquare.setAttribute("height", "50");
        coverSquare.setAttribute("x", rotatedX * 2.4);
        coverSquare.setAttribute("y", rotatedY * 2.4);
      });

      logo.addEventListener("mouseleave", () => {
        coverSquare.setAttribute("width", "45");
        coverSquare.setAttribute("height", "45");
        coverSquare.setAttribute("transform", "rotate(45 100 100)");
        coverSquare.setAttribute("x", "53");
        coverSquare.setAttribute("y", "137.5");
      });
    }
  }
  customElements.define("logo-element", Logo);
</script>

<style>
  .logo-container svg {
    width: 48px;
    height: 48px;
  }

  #cover-square {
    transition: transform 500ms ease;
  }

  .coverSquare-white {
    fill: #fff;
  }
</style>
